apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: production

namePrefix: prod-

resources:
- ../../base

patches:
- path: reminder-patch.yaml
  target:
    kind: CronJob
    name: reminder
- path: todo-backend-configmap-patch.yaml
  target:
    kind: ConfigMap
    name: todo-backend-configmap
- path: todo-app-configmap-patch.yaml
  target:
    kind: ConfigMap
    name: todo-app-configmap

patchesJson6902:
- patch: |-
    - op: replace
      path: /spec/rules/0/backendRefs/0/name
      value: prod-todo-app-svc
    - op: replace
      path: /spec/parentRefs/0/name
      value: prod-dwk-material-gateway
  target:
    group: gateway.networking.k8s.io
    kind: HTTPRoute
    name: todo-app-route
    version: v1

images:
- name: backend-image
  newName: ramanan98/todo-backend
  newTag: 3f67e4f00a4292f6a6b6e6b92841c415a34ec51d
- name: broadcaster-image
  newName: ramanan98/broadcaster
  newTag: 3f67e4f00a4292f6a6b6e6b92841c415a34ec51d
- name: image-read-image
  newName: ramanan98/image-read
  newTag: 3f67e4f00a4292f6a6b6e6b92841c415a34ec51d
- name: image-write-image
  newName: ramanan98/image-write
  newTag: 3f67e4f00a4292f6a6b6e6b92841c415a34ec51d
- name: reminder-image
  newName: ramanan98/reminder
  newTag: 3f67e4f00a4292f6a6b6e6b92841c415a34ec51d
